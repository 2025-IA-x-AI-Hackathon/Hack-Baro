# Development environment example for @baro/desktop

# Show Electron window minimized (default: empty/false)
START_MINIMIZED=false

# Enable extra debug behaviours in packaged builds (leave false in dev)
DEBUG_PROD=false

# Control sandboxed renderer (keep false in development unless testing)
ELECTRON_SANDBOX=true

# Select detector implementation for inference worker: mediapipe | onnx
POSELY_DETECTOR=mediapipe

# Gate posture score output until validation completes
POSELY_ENABLE_EXPERIMENTAL_SCORING=

POSELY_SIGNAL_TRACE=1
POSELY_SIGNAL_TRACE_FILE=./signal-trace.log

# App-specific toggles only (shared/project-wide env should live in repo root .env)
POSELY_DEBUG_HUD=false
POSELY_DEBUG_CAMERA_PREVIEW=false
POSELY_DEBUG_HEAD_POSE=true
POSELY_DEBUG_ALLOW_UNRELIABLE_SIGNALS=true
POSELY_DEBUG_GUARDRAILS_VERBOSE=true
POSELY_CALIBRATION_DEBUG=true

# Face presence defaults
POSELY_FACE_PRESENCE_MIN_AREA=0.004
POSELY_FACE_PRESENCE_MAX_AREA=0.09
POSELY_FACE_PRESENCE_STABILITY_FALLBACK=0.7
POSELY_FACE_PRESENCE_AREA_WEIGHT=0.65
POSELY_FACE_PRESENCE_STABILITY_WEIGHT=0.35
POSELY_FACE_PRESENCE_MULTIPLE_PENALTY=0.6

# Guardrail defaults
POSELY_GUARDRAIL_YAW_ENTER_DEG=35
POSELY_GUARDRAIL_YAW_EXIT_DEG=30
POSELY_GUARDRAIL_YAW_ENTER_SECONDS=2
POSELY_GUARDRAIL_YAW_EXIT_SECONDS=1
POSELY_GUARDRAIL_ROLL_ENTER_DEG=25
POSELY_GUARDRAIL_ROLL_EXIT_DEG=20
POSELY_GUARDRAIL_ROLL_ENTER_SECONDS=2
POSELY_GUARDRAIL_ROLL_EXIT_SECONDS=1
POSELY_GUARDRAIL_CONF_FACE_THRESHOLD=0.35
POSELY_GUARDRAIL_CONF_POSE_THRESHOLD=0.35
POSELY_GUARDRAIL_CONF_ENTER_SECONDS=1
POSELY_GUARDRAIL_CONF_EXIT_SECONDS=0.5
POSELY_GUARDRAIL_ILLUM_THRESHOLD=0.3
POSELY_GUARDRAIL_ILLUM_ENTER_SECONDS=1
POSELY_GUARDRAIL_ILLUM_EXIT_SECONDS=0.5
POSELY_SIGNAL_CONF_THRESHOLD=0.4

# Risk detection defaults
POSELY_RISK_PITCH_DEG=12
POSELY_RISK_EHD_NORM=0.18
POSELY_RISK_DPR_DELTA=0.12
POSELY_RISK_TRIGGER_SEC=60
POSELY_RISK_RECOVERY_SEC=30
POSELY_RISK_HYST_DELTA_PCT=20
POSELY_RISK_DEGENERATE_PITCH_DEG=85

# Score tuning overrides (tweak posture scoring without rebuilds)
# Neutral score used when metrics freeze or have not yet stabilised (range 0-100).
POSELY_SCORE_NEUTRAL=70
# Exponential moving average smoothing factor (0.01-1.0, higher reacts faster).
POSELY_SCORE_ALPHA=0.2
# Weighting applied to forward head pitch deviation (points per degree).
POSELY_SCORE_W_PITCH=3.0
# Weighting applied to ear-shoulder distance deviation (points per normalised unit).
POSELY_SCORE_W_EHD=250
# Weighting applied to depth proxy ratio deviation (points per ratio unit).
POSELY_SCORE_W_DPR=150

ENABLE_DEVTOOLS_EXTENSIONS=true

# --- Recommended starting values (field-friendly) ---
# These values can improve stability during typical laptop posture in early testing.
# They are suggestions only; leave defaults above as-is unless you are tuning.
# Yaw guardrail: enter 35°, exit 30°, durations 2s/1s
# POSELY_GUARDRAIL_YAW_ENTER_DEG=35
# POSELY_GUARDRAIL_YAW_EXIT_DEG=30
# Roll guardrail: enter 25°, exit 20°, durations 2s/1s
# POSELY_GUARDRAIL_ROLL_ENTER_DEG=25
# POSELY_GUARDRAIL_ROLL_EXIT_DEG=20
# Confidence thresholds: face ≥ 0.35, pose ≥ 0.35, durations 2s/1s
# POSELY_GUARDRAIL_CONF_FACE_THRESHOLD=0.35
# POSELY_GUARDRAIL_CONF_POSE_THRESHOLD=0.35
# -----------------------------------------------------
